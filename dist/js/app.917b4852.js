(function(t){function e(e){for(var a,i,o=e[0],c=e[1],u=e[2],d=0,m=[];d<o.length;d++)i=o[d],n[i]&&m.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(m.length)m.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],a=!0,o=1;o<s.length;o++){var c=s[o];0!==n[c]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},n={1:0},r=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;r.push([16,0]),s()})({"+3rX":function(t,e,s){"use strict";var a=s("hDcm"),n=s.n(a);n.a},"0lni":function(t,e,s){},16:function(t,e,s){t.exports=s("Vtdi")},"27zV":function(t,e,s){},"BpB/":function(t,e,s){"use strict";var a=s("KsoG"),n=s.n(a);n.a},D1Td:function(t,e,s){"use strict";var a=s("Oic/"),n=s.n(a);n.a},Gl40:function(t,e,s){},JtcG:function(t,e,s){"use strict";var a=s("ajkl"),n=s.n(a);n.a},"K4/P":function(t,e,s){},KYIk:function(t,e,s){"use strict";var a=s("n6l4"),n=s.n(a);n.a},KsoG:function(t,e,s){},MmIL:function(t,e,s){"use strict";var a=s("SB/2"),n=s.n(a);n.a},"Oic/":function(t,e,s){},RnhZ:function(t,e,s){var a={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function n(t){var e=r(t),a=s(e);return a}function r(t){var e=a[t];if(!(e+1)){var s=new Error('Cannot find module "'+t+'".');throw s.code="MODULE_NOT_FOUND",s}return e}n.keys=function(){return Object.keys(a)},n.resolve=r,t.exports=n,n.id="RnhZ"},"SB/2":function(t,e,s){},Vtdi:function(t,e,s){"use strict";s.r(e);s("VRzm");var a=s("Kw5r"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"},on:{click:function(e){e.stopPropagation(),t.closeDrawer()}}},[s("Toolbar"),t._v(" "),s("Drawer"),t._v(" "),s("transition",{attrs:{name:"fade",mode:"out-in"}},[s("router-view",{staticClass:"view mdc-top-app-bar--prominent-fixed-adjust"})],1),t._v("\n  ROOT_BACKEND_URL\n  "),s("YouTubeMusicPlayer"),t._v(" "),s("Snackbar")],1)},r=[],i=(s("KKXr"),s("ls82"),s("MECJ")),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("aside",{staticClass:"mdc-drawer mdc-drawer--temporary mdc-typography"},[s("nav",{staticClass:"mdc-drawer__drawer"},[s("header",{staticClass:"mdc-drawer__header"},[t.isLogin?s("div",{staticClass:"mdc-drawer__header-content mdc-theme--text-primary-on-primary mdc-theme--primary-bg"},[t._v("\n          "+t._s(t.displayName)+"\n        ")]):s("div",{staticClass:"mdc-drawer__header-content mdc-theme--text-primary-on-primary mdc-theme--primary-bg"},[t._v("\n          Not Signed Yet\n        ")])]),t._v(" "),s("div",{},[s("div",{staticClass:"mdc-list",attrs:{id:"icon-with-text-demo"}},[s("router-link",{staticClass:"mdc-list-item",attrs:{"active-class":"mdc-list-item--selected",tag:"a",to:"/",exact:""}},[s("i",{staticClass:"material-icons mdc-list-item__graphic",attrs:{"aria-hidden":"true"}},[t._v("settings_input_component")]),t._v("Home\n          ")]),t._v(" "),s("router-link",{staticClass:"mdc-list-item",attrs:{"active-class":"mdc-list-item--selected",tag:"a",to:"/songs",exact:""}},[s("i",{staticClass:"material-icons mdc-list-item__graphic",attrs:{"aria-hidden":"true"}},[t._v("settings_input_component")]),t._v("Songs\n          ")]),t._v(" "),s("router-link",{staticClass:"mdc-list-item",attrs:{"active-class":"mdc-list-item--selected",tag:"a",to:"/add-song",exact:""}},[s("i",{staticClass:"material-icons mdc-list-item__graphic",attrs:{"aria-hidden":"true"}},[t._v("settings_input_component")]),t._v("Add a Song\n          ")]),t._v(" "),s("router-link",{staticClass:"mdc-list-item",attrs:{"active-class":"mdc-list-item--selected",tag:"a",to:"/coupons",exact:""}},[s("i",{staticClass:"material-icons mdc-list-item__graphic",attrs:{"aria-hidden":"true"}},[t._v("settings_input_component")]),t._v("Offers\n          ")]),t._v(" "),s("router-link",{staticClass:"mdc-list-item",attrs:{"active-class":"mdc-list-item--selected",tag:"a",to:"/create-coupon",exact:""}},[s("i",{staticClass:"material-icons mdc-list-item__graphic",attrs:{"aria-hidden":"true"}},[t._v("settings_input_component")]),t._v("Create Offer\n          ")]),t._v(" "),s("router-link",{staticClass:"mdc-list-item",attrs:{"active-class":"mdc-list-item--selected",tag:"a",to:"/generate-coupons",exact:""}},[s("i",{staticClass:"material-icons mdc-list-item__graphic",attrs:{"aria-hidden":"true"}},[t._v("settings_input_component")]),t._v("Generate Coupons\n          ")])],1),t._v(" "),s("hr",{staticClass:"mdc-list-divider"}),t._v(" "),t._m(0),t._v(" "),s("hr",{staticClass:"mdc-list-divider"})])])])},c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdc-list"},[s("a",{staticClass:"mdc-list-item demo-drawer-list-item",attrs:{href:"#"}},[s("i",{staticClass:"material-icons mdc-list-item__graphic",attrs:{"aria-hidden":"true"}},[t._v("email")]),t._v("All Mail\n          ")]),t._v(" "),s("a",{staticClass:"mdc-list-item demo-drawer-list-item",attrs:{href:"#"}},[s("i",{staticClass:"material-icons mdc-list-item__graphic",attrs:{"aria-hidden":"true"}},[t._v("delete")]),t._v("Trash\n          ")]),t._v(" "),s("a",{staticClass:"mdc-list-item demo-drawer-list-item",attrs:{href:"#"}},[s("i",{staticClass:"material-icons mdc-list-item__graphic",attrs:{"aria-hidden":"true"}},[t._v("report")]),t._v("Spam\n          ")])])}],u=s("yT7P"),l=s("L2JU"),d=s("6y5k"),m={data:function(){return{drawer:void 0}},computed:Object(u["a"])({drawerOpen:function(){return this.$store.state.UI.drawerOpen},workingEnvironment:function(){return this.$store.state.environment}},Object(l["c"])({isLogin:function(t){return t.isLogin},displayName:function(t){return t.userDisplayName}})),watch:{drawerOpen:function(t){this.drawer.open=t}},mounted:function(){this.drawer=new d["MDCTemporaryDrawer"](document.querySelector(".mdc-drawer--temporary"))},methods:Object(u["a"])({},Object(l["b"])({toggleDrawer:"toggleDrawer"}))},p=m,h=(s("BpB/"),s("KHd+")),v=Object(h["a"])(p,o,c,!1,null,null,null),g=v.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"mdc-top-app-bar mdc-top-app-bar--prominent"},[s("div",{staticClass:"mdc-top-app-bar__row"},[s("section",{staticClass:"mdc-top-app-bar__section mdc-toolbar__section--align-start"},[s("button",{staticClass:"material-icons mdc-top-app-bar__navigation-icon",on:{click:function(e){e.stopPropagation(),t.toggleDrawer(!0)}}},[t._v("menu")]),t._v(" "),s("span",{staticClass:"mdc-top-app-bar__title"},[t._v("My Shitty Music "+t._s(t.appMode))])]),t._v(" "),s("section",{staticClass:"mdc-top-app-bar__section mdc-top-app-bar__section--align-end",attrs:{role:"toolbar"}},[s("span",{staticClass:"mdc-top-app-bar__action-item mdc-typography--body3 display-name"},[t._v(t._s(t.displayName))]),t._v(" "),t.isLogin?s("button",{staticClass:"material-icons mdc-top-app-bar__action-item",attrs:{"aria-label":"Logout"},on:{click:function(e){t.logout()}}},[t._v("exit_to_app")]):t._e(),t._v(" "),t.isLogin?t._e():s("GoogleSignInBtn")],1)])])},_=[],b=s("U6Tn"),y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"customGPlusSignIn",attrs:{id:"customBtn"},on:{click:function(e){t.signIn()}}},[s("span",{staticClass:"icon"}),t._v(" "),s("span",{staticClass:"buttonText"},[t._v("Google")])])},k=[],w={mounted:function(){var t=this,e=document.createElement("script");e.setAttribute("src","https://apis.google.com/js/client:platform.js"),e.async=!0,e.onload=function(){window.gapi.load("auth2",function(){console.log(window.gapi.auth2),t.auth2=window.gapi.auth2.init({client_id:"138866895643-s1ujmhe4bt35gbhht9p53st8rusqh2s2.apps.googleusercontent.com"})})},document.head.appendChild(e)},methods:{signIn:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,s,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.auth2.grantOfflineAccess();case 3:if(e=t.sent,!e){t.next=18;break}return s=e.code,console.log(s),t.next=9,this.$store.dispatch("GOOGLE_LOGIN",s);case 9:return t.sent,this.$store.state.isLogin&&localStorage.setItem("userInfo",JSON.stringify({userId:this.$store.state.userId,userDisplayName:this.$store.state.userDisplayName,token:this.$store.state.token})),a=localStorage.getItem("userInfo"),a?a=JSON.parse(a):this.$store.commit("logout"),t.next=15,this.$store.dispatch("UPDATE_LOGIN_STATE",{user_id:a.userId,token:a.token,display_name:a.userDisplayName});case 15:t.sent,t.next=19;break;case 18:this.$store.commit("logout");case 19:t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](0),console.error(t.t0),this.$store.commit("logout");case 25:case"end":return t.stop()}},t,this,[[0,21]])}));return function(){return t.apply(this,arguments)}}()}},j=w,C=(s("vUwQ"),Object(h["a"])(j,y,k,!1,null,null,null)),x=C.exports,S={components:{GoogleSignInBtn:x},data:function(){return{appMode:"production"}},computed:Object(u["a"])({workingEnvironment:function(){return this.$store.state.environment}},Object(l["c"])({isLogin:function(t){return t.isLogin},displayName:function(t){return t.userDisplayName}})),mounted:function(){var t=document.querySelector(".mdc-top-app-bar");new b["a"](t)},methods:Object(u["a"])({},Object(l["b"])({toggleDrawer:"toggleDrawer"}),{logout:function(){this.$store.commit("logout"),localStorage.setItem("userInfo",""),window.location.href=this.$store.state.rootUrl}})},O=S,I=(s("tYsn"),Object(h["a"])(O,f,_,!1,null,"6a7c1b66",null)),T=I.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"youtube-player mdc-elevation--z24"},[t._m(0),t._v(" "),s("div",{staticClass:"mdc-slider",attrs:{id:"youtube-player-slider",tabindex:"0",role:"slider","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"0","aria-label":"Select Value"}},[t._m(1),t._v(" "),s("div",{staticClass:"mdc-slider__thumb-container"},[s("svg",{staticClass:"mdc-slider__thumb",attrs:{width:"21",height:"21"}},[s("circle",{attrs:{cx:"10.5",cy:"10.5",r:"7.875"}})]),t._v(" "),s("div",{staticClass:"mdc-slider__focus-ring"})])]),t._v(" "),s("div",{staticClass:"youtube-player--control-panel"},[s("div",{staticClass:"control-btns"},[t._m(2),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:1!==t.playerState,expression:"playerState !== 1"}],staticClass:"mdc-fab material-icons",attrs:{"aria-label":"Play"},on:{click:function(e){t.resumeVideo()}}},[s("span",{staticClass:"mdc-fab__icon"},[t._v("\n          play_arrow\n        ")])]),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:1===t.playerState,expression:"playerState === 1"}],staticClass:"mdc-fab material-icons",attrs:{"aria-label":"Pause"},on:{click:function(e){t.pauseVideo()}}},[s("span",{staticClass:"mdc-fab__icon"},[t._v("\n          pause\n        ")])]),t._v(" "),t._m(3)]),t._v(" "),s("div",{staticClass:"music-info"},[s("div",{staticClass:"demo-card__music-artist mdc-typography--headline5"},[t._v(t._s(t.songInfo.name))]),t._v(" "),s("div",{staticClass:"demo-card__music-year mdc-typography--body2"},[t._v(t._s(t.songInfo.artist))]),t._v(" "),s("div",{staticClass:"demo-card__music-year mdc-typography--body2"},[t._v(t._s(t.currentVideoCurrentTime||""))])])])])},M=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"uframe hidden"},[s("div",{attrs:{id:"youtube-player-thot"}},[s("iframe",{attrs:{frameborder:"0",allowfullscreen:"allowfullscreen"}})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdc-slider__track-container"},[s("div",{staticClass:"mdc-slider__track"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"mdc-fab material-icons mdc-fab--mini",attrs:{"aria-label":"Skip Prev"}},[s("span",{staticClass:"mdc-fab__icon"},[t._v("\n          skip_previous\n        ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"mdc-fab material-icons mdc-fab--mini",attrs:{"aria-label":"Skip Next"}},[s("span",{staticClass:"mdc-fab__icon"},[t._v("\n          skip_next\n        ")])])}],D=s("D+Oc"),R=s.n(D),P=s("J1oY"),V=(s("xqV+"),{data:function(){return{ytPlayerStates:{"-1":"unstarted",0:"ended",1:"playing",2:"paused",3:"buffering",5:"video cued",ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},player:void 0,playerTimer:void 0,playerState:-1,slider:void 0}},computed:Object(u["a"])({},Object(l["c"])("YouTubeMusicPlayer",{currentVideoId:function(t){return t.currentVideoId},currentVideoDuration:function(t){return t.currentVideoDuration},currentVideoCurrentTime:function(t){return t.currentVideoCurrentTime},userInputState:function(t){return t.userInputState},songInfo:function(t){return t.songInfo}})),mounted:function(){this.setupSlider()},watch:{currentVideoId:function(t){var e=this;this.player?(clearInterval(this.playerTimer),this.player.destroy().then(function(){e.setupPlayer(t),e.setupSlider()})):(this.setupPlayer(t),this.setupSlider())}},methods:Object(u["a"])({},Object(l["b"])({updateCurrentVideoId:"YouTubeMusicPlayer/updateCurrentVideoId",updateCurrentVideoDuration:"YouTubeMusicPlayer/updateCurrentVideoDuration",updateCurrentVideoCurrentTime:"YouTubeMusicPlayer/updateCurrentVideoCurrentTime",updateUserInputState:"YouTubeMusicPlayer/updateUserInputState"}),{setupSlider:function(){var t=this;this.slider=new P["a"](document.querySelector("#youtube-player-slider")),this.slider.listen("MDCSlider:input",Object(i["a"])(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.updateUserInputState(!1),s=t.slider.value/100*t.currentVideoDuration,!t.player){e.next=5;break}return e.next=5,t.player.seekTo(s);case 5:console.log("Player value changed to ".concat(t.slider.value)),t.updateUserInputState(!0);case 7:case"end":return e.stop()}},e,this)})))},setupPlayer:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.player=R()("youtube-player-thot"),this.player.loadVideoById(e),this.player.on("stateChange",function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.data,s.playerState=a,a!=s.ytPlayerStates.PLAYING){t.next=8;break}return t.next=5,s.player.getDuration();case 5:n=t.sent,s.updateCurrentVideoDuration(n),s.playerTimer=setInterval(Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.player.getCurrentTime();case 2:e=t.sent,e!==s.currentVideoCurrentTime&&(s.updateCurrentVideoCurrentTime(e),a=e/n*100,console.log(e),s.userInputState&&s.setProgressBar(a));case 4:case"end":return t.stop()}},t,this)})),1e3);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),this.player.playVideo();case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),setProgressBar:function(t){var e=100,s=t*e/100;this.slider.value=s},resumeVideo:function(){this.player&&this.player.playVideo()},pauseVideo:function(){this.player&&this.player.pauseVideo()}})}),U=V,N=(s("r207"),Object(h["a"])(U,E,M,!1,null,"30cb904f",null)),$=N.exports,A=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},L=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdc-snackbar mdc-snackbar--align-start",attrs:{id:"notification--snack-bar","aria-live":"assertive","aria-atomic":"true","aria-hidden":"true"}},[s("div",{staticClass:"mdc-snackbar__text"}),t._v(" "),s("div",{staticClass:"mdc-snackbar__action-wrapper"},[s("button",{staticClass:"mdc-snackbar__action-button",attrs:{type:"button"}})])])}],B=s("i4QK"),Y={data:function(){return{snackbar:void 0}},computed:{showSnackBar:function(){return this.$store.state.UI.showSnackBar},snackBarMsg:function(){return this.$store.state.UI.snackBarMsg}},watch:{showSnackBar:function(t){var e=this;if(t){console.log(this.snackBarMsg);var s={message:this.snackBarMsg,actionText:"close",actionHandler:function(){console.log(e.snackBarMsg)}};this.snackbar.show(s),this.$store.commit("toggleSnackBar",!1),this.$store.commit("updateSnackBarMsg","")}}},mounted:function(){this.snackbar=new B["a"](document.querySelector("#notification--snack-bar"))}},z=Y,W=(s("MmIL"),Object(h["a"])(z,A,L,!1,null,null,null)),F=W.exports,H=s("wj3C"),G=s.n(H),K=(s("gHGA"),{components:{Drawer:g,Toolbar:T,YouTubeMusicPlayer:$,Snackbar:F},data:function(){return{ws:void 0}},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),computed:{sendWebsocketMsg:function(){return this.$store.state.Websocket.sendWebsocketMsg},isLoginIn:function(){return this.$store.state.isLogin}},watch:{sendWebsocketMsg:function(t){t&&(console.log("hihi"),console.log(this.$store.state.Websocket.websocketMsg),this.ws.send(this.$store.state.Websocket.websocketMsg),this.$store.commit("updateWebsocketMsg",""),this.$store.commit("toggleSendWebsocketMsg",!1))},isLoginIn:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.connectToWebSocket();case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{handleFirebaseMessaging:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,s,a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("handleFirebaseMessaging"),e=G.a.messaging(),e.usePublicVapidKey("BJvhLia-szgnA5EUiD71RT_ffEwG1d3E9mcK2poaMSWlzZAkhM-WAmfqBLlwDmf4WGO1MX7PWno7PCHGERj8Grc"),t.prev=3,t.next=6,navigator.serviceWorker.register("".concat("/","firebase-messaging-sw.js"));case 6:return s=t.sent,console.log(s),e.useServiceWorker(s),t.next=11,e.requestPermission();case 11:return t.sent,t.next=14,e.getToken();case 14:a=t.sent,a&&(console.log(a),this.$store.state.isLogin&&this.$store.dispatch("UPDATE_FCM_TOKEN",a),e.onTokenRefresh(Object(i["a"])(regeneratorRuntime.mark(function t(){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getToken();case 3:s=t.sent,console.log(s),n.$store.state.isLogin&&n.$store.dispatch("UPDATE_FCM_TOKEN",s),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("Unable to refresh token",t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}))),e.onMessage(function(t){console.log("Message received. ",t),alert(t)})),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](3),console.log("Unable to get permission to notify.",t.t0);case 21:case"end":return t.stop()}},t,this,[[3,18]])}));return function(){return t.apply(this,arguments)}}(),closeDrawer:function(){this.$store.commit("toggleDrawer",!1)},connectToWebSocket:function(){var t=this;this.ws=new WebSocket(this.$store.state.wsUrl),this.ws.onopen=function(){0},this.ws.onmessage=function(e){console.log("websocket content"),console.log(e.data);var s=JSON.parse(e.data);if("text"===s.type)t.$store.commit("updateSnackBarMsg",JSON.stringify(s.content)),t.$store.commit("toggleSnackBar",!0);else if("play"===s.type){var a=s.content.split(":");t.$store.commit("updatePlay",{id:a[0],plays:a[1]})}else{var n=JSON.parse(s.content),r="".concat(n.username," upvoted ").concat(n.song);t.$store.commit("updateSnackBarMsg",r),t.$store.commit("toggleSnackBar",!0),t.$store.commit("updateUpvote",{songId:n.songid,upvotes:n.upvotes,userId:n.userid})}}}}}),J=K,q=(s("nNx0"),Object(h["a"])(J,n,r,!1,null,null,null)),Q=q.exports,X=s("jE9Z"),Z={state:{drawerOpen:!1,showSnackBar:!1,snackBarMsg:"",imageDialogOpen:!1,messageDialogOpen:!1,chosenImage:{name:"",url:""}},mutations:{toggleDrawer:function(t,e){t.drawerOpen=e},toggleSnackBar:function(t,e){t.showSnackBar=e},updateSnackBarMsg:function(t,e){t.snackBarMsg=e},toggleImageDialog:function(t,e){t.imageDialogOpen=e},updateChosenImage:function(t,e){t.chosenImage=e},toggleMessageDialog:function(t,e){t.messageDialogOpen=e}}},tt={state:{websocketMsg:void 0,sendWebsocketMsg:!1},mutations:{toggleSendWebsocketMsg:function(t,e){t.sendWebsocketMsg=e},updateWebsocketMsg:function(t,e){t.websocketMsg=e}}},et={namespaced:!0,state:{currentVideoId:"",currentVideoDuration:0,currentVideoCurrentTime:0,userInputState:!0,songInfo:{}},mutations:{updateCurrentVideoId:function(t,e){t.currentVideoId=e},updateCurrentVideoDuration:function(t,e){t.currentVideoDuration=e},updateCurrentVideoCurrentTime:function(t,e){t.currentVideoCurrentTime=e},updateUserInputState:function(t,e){t.userInputState=e},updateSongInfo:function(t,e){t.songInfo=e}},actions:{}};a["a"].use(l["a"]);var st=new l["a"].Store({modules:{UI:Z,Websocket:tt,YouTubeMusicPlayer:et},state:{baseUrl:"https://my-shitty-music-backend.herokuapp.com",rootUrl:"https://my-shitty-music.herokuapp.com",wsUrl:"wss://my-shitty-music-backend.herokuapp.com/websocket",isLogin:!1,isFCMSetup:!1,userDisplayName:"",userId:"",token:"",songs:[]},mutations:{updateSongs:function(t,e){t.songs=e},updatePlay:function(t,e){var s=e.id,a=e.plays,n=t.songs.map(function(t){return t.id===s?Object(u["a"])({},t,{plays:a}):t});t.songs=n},updateUpvote:function(t,e){var s=e.songId,a=e.upvotes,n=e.userId,r=t.songs.map(function(e){if(e.id===s){var r=Object(u["a"])({},e,{upvotes:a});return n===t.userId&&(r.isHeart=!0),r}return e});t.songs=r},addHeartsToSongs:function(t,e){var s=t.songs.map(function(t){return e.indexOf(t.id)>=0?Object(u["a"])({},t,{isHeart:!0}):Object(u["a"])({},t,{isHeart:!1})});t.songs=s},updateLoginInfo:function(t,e){t.isLogin=e.isLogin,t.userDisplayName=e.userDisplayName,t.userId=e.userId,t.token=e.token},logout:function(t){t.isLogin=!1,t.userDisplayName="",t.userId="",t.token="",window&&window.localStorage&&localStorage.setItem("userInfo","")},updateFCMStatus:function(t,e){t.isFCMSetup=e}},actions:{UPDATE_LOGIN_STATE:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,s){var a,n,r,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.commit,r=e.dispatch,console.log(s),t.prev=2,t.next=5,fetch("".concat(a.baseUrl,"/check-login"),{method:"POST",mode:"cors",body:JSON.stringify({user_id:s.user_id,token:s.token})});case 5:return i=t.sent,t.next=8,i.json();case 8:if(o=t.sent,console.log(o.status),!o.status){t.next=16;break}return n("updateLoginInfo",{isLogin:!0,userDisplayName:s.display_name,userId:s.user_id,token:s.token}),t.next=14,r("FETCH_USER_UPVOTES");case 14:t.next=17;break;case 16:n("logout");case 17:t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](2),console.error(t.t0),n("logout");case 23:case"end":return t.stop()}},t,this,[[2,19]])}));return function(e,s){return t.apply(this,arguments)}}(),GOOGLE_LOGIN:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,s){var a,n,r,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.commit,t.prev=1,t.next=4,fetch("".concat(a.baseUrl,"/authenticate"),{method:"POST",mode:"cors",body:JSON.stringify({type:"google",code:s})});case 4:return r=t.sent,t.next=7,r.json();case 7:i=t.sent,o={isLogin:!0,userId:i.user_id,token:i.token,userDisplayName:i.user_name},n("updateLoginInfo",o),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](1),console.error(t.t0),n("logout");case 16:case"end":return t.stop()}},t,this,[[1,12]])}));return function(e,s){return t.apply(this,arguments)}}(),FETCH_SONGS:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var s,a,n,r,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,a=e.state,n=e.dispatch,t.next=3,fetch("".concat(a.baseUrl,"/songs"));case 3:return r=t.sent,t.next=6,r.json();case 6:if(i=t.sent,o=a.songs.length>0,i=i.map(function(t){return Object(u["a"])({},t,{isHeart:!1})}),!o||!a.isLogin){t.next=12;break}return t.next=12,n("FETCH_USER_UPVOTES");case 12:s("updateSongs",i);case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),FETCH_PLAYS:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var s,a,n,r,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,a=e.state,t.prev=1,t.next=4,fetch("".concat(a.baseUrl,"/songs/plays"));case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,i={},r.forEach(function(t){i[t.SongID]=t.Plays}),o=a.songs.map(function(t){return Object(u["a"])({},t,{plays:i[t.id]})}),s("updateSongs",o),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](1),console.error("FETCH_PLAYS failed"),console.error(t.t0);case 18:case"end":return t.stop()}},t,this,[[1,14]])}));return function(e){return t.apply(this,arguments)}}(),FETCH_USER_UPVOTES:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var s,a,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,a=e.state,t.prev=1,t.next=4,fetch("".concat(a.baseUrl,"/users/upvotes/").concat(a.userId),{headers:{Accept:"application/json","Content-Type":"application/json","x-access-token":a.token}});case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,s("addHeartsToSongs",r.upvotes),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](1),console.error("FETCH_USER_UPVOTES failed"),console.error(t.t0);case 15:case"end":return t.stop()}},t,this,[[1,11]])}));return function(e){return t.apply(this,arguments)}}(),UPDATE_FCM_TOKEN:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,s){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,n=e.state,t.prev=1,console.log("before doing UPDATE_FCM_TOKEN"),console.info("login status is ".concat(n.isLogin)),t.next=6,fetch("".concat(n.baseUrl,"/update-fcm-token"),{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json","x-access-token":n.token},body:JSON.stringify({token:s})});case 6:a("updateFCMStatus",!0),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.error("Failed to UPDATE_FCM_TOKEN",t.t0);case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e,s){return t.apply(this,arguments)}}(),SETUP_FCM:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var s,a,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.commit,s=e.state,a=e.dispatch,console.log("handleFirebaseMessaging"),n=G.a.messaging(),n.usePublicVapidKey("BJvhLia-szgnA5EUiD71RT_ffEwG1d3E9mcK2poaMSWlzZAkhM-WAmfqBLlwDmf4WGO1MX7PWno7PCHGERj8Grc"),!navigator){t.next=17;break}return t.prev=5,t.next=8,n.requestPermission();case 8:return t.next=10,n.getToken();case 10:r=t.sent,r&&(console.log(r),s.isLogin&&a("UPDATE_FCM_TOKEN",r),n.onTokenRefresh(Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.getToken();case 3:e=t.sent,console.log(e),s.isLogin&&a("UPDATE_FCM_TOKEN",e),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("Unable to refresh token",t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}))),n.onMessage(function(t){console.log("Message received. ".concat(t)),alert(t)})),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](5),console.error("Unable to get permission to notify.",t.t0);case 17:case"end":return t.stop()}},t,this,[[5,14]])}));return function(e){return t.apply(this,arguments)}}()}}),at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("img",{attrs:{src:s("zwU1")}}),t._v(" "),a("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},nt=[],rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hello"},[s("h1",[t._v(t._s(t.msg))]),t._v(" "),t._m(0),t._v(" "),s("h3",[t._v("Installed CLI Plugins")]),t._v(" "),t._m(1),t._v(" "),s("h3",[t._v("Essential Links")]),t._v(" "),t._m(2),t._v(" "),s("h3",[t._v("Ecosystem")]),t._v(" "),t._m(3)])},it=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("\n    For guide and recipes on how to configure / customize this project,"),s("br"),t._v("\n    check out the\n    "),s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/docs",target:"_blank"}},[t._v("vue-cli documentation")]),t._v(".\n  ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank"}},[t._v("babel")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-pwa",target:"_blank"}},[t._v("pwa")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank"}},[t._v("eslint")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-unit-jest",target:"_blank"}},[t._v("unit-jest")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-e2e-nightwatch",target:"_blank"}},[t._v("e2e-nightwatch")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("Core Docs")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("Forum")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("Community Chat")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("Twitter")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("a",{attrs:{href:"https://router.vuejs.org/en/essentials/getting-started.html",target:"_blank"}},[t._v("vue-router")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://vuex.vuejs.org/en/intro.html",target:"_blank"}},[t._v("vuex")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank"}},[t._v("vue-devtools")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank"}},[t._v("vue-loader")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[t._v("awesome-vue")])])])}],ot={name:"HelloWorld",props:{msg:String}},ct=ot,ut=(s("zH0n"),Object(h["a"])(ct,rt,it,!1,null,"57c6c899",null)),lt=ut.exports,dt={name:"home",components:{HelloWorld:lt}},mt=dt,pt=Object(h["a"])(mt,at,nt,!1,null,null,null),ht=(pt.exports,function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),vt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"about"},[s("h1",[t._v("This is an about page")])])}],gt={},ft=Object(h["a"])(gt,ht,vt,!1,null,null,null),_t=(ft.exports,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"songs-view"},t._l(t.songs,function(t){return s("MusicSmallCard",{attrs:{"song-id":t.id,"youtube-id":t.youtube_id,title:t.name,artist:t.artist,timestamp:t.date,url:t.thumbnails.medium,upvotes:t.upvotes,plays:t.plays,isHeart:t.isHeart}})}))}),bt=[],yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdc-card demo-card demo-card--music"},[s("a",{staticClass:"mdc-card__primary-action demo-card__primary-action mdc-ripple-upgraded mdc-ripple-upgraded--foreground-activation",staticStyle:{"--mdc-ripple-fg-size":"210px","--mdc-ripple-fg-scale":"1.79466","--mdc-ripple-fg-translate-start":"-66.148px, -62.2419px","--mdc-ripple-fg-translate-end":"70px, -50px"},attrs:{href:"javascript:void(0)"}},[s("div",{staticClass:"demo-card__music-row"},[s("div",{staticClass:"mdc-card__media mdc-card__media--square demo-card__media demo-card__media--music",style:{backgroundImage:"url("+t.url+")"}}),t._v(" "),s("div",{staticClass:"demo-card__music-info"},[s("div",{staticClass:"demo-card__music-title mdc-typography--headline mdc-typography--headline5"},[t._v(t._s(t.title))]),t._v(" "),s("div",{staticClass:"demo-card__music-artist mdc-typography--body2"},[t._v(t._s(t.artist))]),t._v(" "),s("div",{staticClass:"demo-card__music-year mdc-typography--body2"},[t._v("("+t._s(t.formattedTimeStamp)+")")]),t._v(" "),s("div",{staticClass:"demo-card__music-year mdc-typography--body2"},[t._v("Played "+t._s(t.plays)+" times")])])])]),t._v(" "),s("hr",{staticClass:"mdc-list-divider"}),t._v(" "),s("div",{staticClass:"mdc-card__actions"},[s("button",{staticClass:"mdc-button mdc-card__action-buttons demo-card__action-buttons--text-only",on:{click:function(e){t.playSong(t.youtubeId,t.songId)}}},[t._v("Play")]),t._v(" "),s("div",{staticClass:"mdc-card__action-icons"},[s("i",{staticClass:"mdc-icon-toggle material-icons hearted",class:{"mdc-icon-toggle--disabled":t.isHeart},attrs:{role:"button","aria-label":"I Go Heart",tabindex:"0","data-toggle-on":'{"label": "I hate it", "content": "favorite"}',"data-toggle-off":'{"label": "I heart it", "content": "favorite_border"}',"aria-pressed":t.isHeart},on:{click:function(e){t.heartSong(t.songId)}}},[t._v("\n        "+t._s(t.isHeart?"favorite":"favorite_border")+"\n      ")]),t._v(" "),t._v("\n      "+t._s(t.upvotes)+"\n      ")])])])},kt=[],wt=s("/xcT"),jt=s("wd/R"),Ct=s.n(jt),xt={props:["title","artist","timestamp","url","upvotes","plays","youtubeId","songId","isHeart"],mounted:function(){wt["a"].attachTo(document.querySelector(".mdc-icon-toggle"))},computed:{formattedTimeStamp:function(){return Ct()(this.timestamp).format("MMM Do YYYY")}},methods:{playSong:function(t,e){this.$store.commit("YouTubeMusicPlayer/updateSongInfo",{name:this.title,artist:this.artist}),this.$store.commit("YouTubeMusicPlayer/updateCurrentVideoId",t),this.$store.commit("updateWebsocketMsg",JSON.stringify({type:"play",content:e})),this.$store.commit("toggleSendWebsocketMsg",!0)},heartSong:function(t){this.$store.state.isLogin&&(this.$store.commit("updateWebsocketMsg",JSON.stringify({type:"upvote",content:"".concat(this.$store.state.token,":").concat(this.$store.state.userId,":").concat(t)})),this.$store.commit("toggleSendWebsocketMsg",!0),this.$store.commit("updateUpvote",{songId:t,upvotes:this.upvotes,userId:this.$store.state.userId}))}}},St=xt,Ot=(s("JtcG"),Object(h["a"])(St,yt,kt,!1,null,null,null)),It=Ot.exports,Tt={components:{MusicSmallCard:It},data:function(){return{}},computed:Object(u["a"])({},Object(l["c"])({songs:function(t){return t.songs}})),watch:{},created:function(){},mounted:function(){},methods:{}},Et=Tt,Mt=(s("KYIk"),Object(h["a"])(Et,_t,bt,!1,null,"525e9334",null)),Dt=Mt.exports,Rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("SongForm")],1)},Pt=[],Vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Card",{attrs:{"card-id":"add-new-song",title:"Add New Song",subtitle:"Fill in this form to add a new song",loading:t.loading,resultAvailable:t.result}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"mdc-text-field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"mdc-text-field__input",attrs:{type:"text",id:"add-song--name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),s("label",{staticClass:"mdc-floating-label",attrs:{for:"add-song--name"}},[t._v("Name")])]),t._v(" "),s("div",{staticClass:"mdc-text-field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.artist,expression:"artist"}],staticClass:"mdc-text-field__input",attrs:{type:"text",id:"add-song--artist"},domProps:{value:t.artist},on:{input:function(e){e.target.composing||(t.artist=e.target.value)}}}),t._v(" "),s("label",{staticClass:"mdc-floating-label",attrs:{for:"add-song--artist"}},[t._v("Artist")])]),t._v(" "),s("div",{staticClass:"mdc-text-field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.country,expression:"country"}],staticClass:"mdc-text-field__input",attrs:{type:"text",id:"add-song--country"},domProps:{value:t.country},on:{input:function(e){e.target.composing||(t.country=e.target.value)}}}),t._v(" "),s("label",{staticClass:"mdc-floating-label",attrs:{for:"add-song--country"}},[t._v("Country")])]),t._v(" "),s("div",{staticClass:"mdc-card__actions"},[s("div",{staticClass:"mdc-card__action-buttons"},[s("button",{staticClass:"mdc-button mdc-card__action mdc-card__action--button",on:{click:function(e){t.searchYouTube()}}},[t._v("Search")])])]),t._v(" "),s("div",{staticClass:"mdc-card__actions"},[s("div",{staticClass:"mdc-card__action-buttons"},[s("button",{staticClass:"mdc-button mdc-card__action mdc-card__action--button",on:{click:function(e){t.sendRequest()}}},[t._v("Send")])])]),t._v(" "),s("hr",{staticClass:"mdc-card__divider"}),t._v(" "),s("ul",{staticClass:"mdc-list demo-list mdc-list--two-line mdc-list--avatar-list"},t._l(t.youtubeResults,function(e){return s("li",{staticClass:"mdc-list-item mdc-ripple-upgraded"},[s("span",{staticClass:"mdc-list-item__graphic mdc-card__media mdc-card__media--square demo-card__media demo-card__media--music",style:{backgroundImage:"url("+e.snippet.thumbnails.medium.url+")"}}),t._v(" "),s("span",{staticClass:"mdc-list-item__text"},[t._v("\n          "+t._s(e.snippet.title)+"\n          "),s("span",{staticClass:"mdc-list-item__secondary-text"},[t._v(t._s(e.snippet.publishedAt))])]),t._v(" "),s("span",{staticClass:"mdc-list-item__meta mdc-form-field"},[s("div",{staticClass:"mdc-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedYTVideo,expression:"selectedYTVideo"}],staticClass:"mdc-radio__native-control",attrs:{type:"radio",id:e.id.videoId,name:"radios"},domProps:{value:e,checked:t._q(t.selectedYTVideo,e)},on:{change:function(s){t.selectedYTVideo=e}}}),t._v(" "),s("div",{staticClass:"mdc-radio__background"},[s("div",{staticClass:"mdc-radio__outer-circle"}),t._v(" "),s("div",{staticClass:"mdc-radio__inner-circle"})])]),t._v(" "),s("label",{attrs:{for:e.id.videoId}},[t._v("Radio 1")])])])}))]),t._v(" "),s("div",{attrs:{slot:"result"},slot:"result"},[t._v("\n    "+t._s(t.result)+"\n  ")])])},Ut=[],Nt=(s("f3/d"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdc-card",attrs:{id:t.cardId}},[s("div",{staticClass:"header"},[s("h2",{staticClass:"mdc-typography--title"},[t._v(t._s(t.title))]),t._v(" "),s("h3",{staticClass:"mdc-typography--subheading1"},[t._v(t._s(t.subtitle))])]),t._v(" "),s("div",{staticClass:"card-content"},[t._t("content",[t._v("\n      Place Content Here\n    ")])],2),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.resultAvailable||t.loading,expression:"resultAvailable || loading"}],staticClass:"card-result"},[s("h3",{staticClass:"mdc-typography--subheading1"},[t._v("Result")]),t._v(" "),s("Spinner",{attrs:{show:t.loading}}),t._v(" "),t._t("result",[t._v("\n      Place Result Here\n    ")])],2)])}),$t=[],At=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",[s("svg",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"spinner",class:{show:t.show},attrs:{width:"44px",height:"44px",viewBox:"0 0 44 44"}},[s("circle",{staticClass:"path",attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])])},Lt=[],Bt={name:"spinner",props:["show"],serverCacheKey:function(t){return t.show}},Yt=Bt,zt=(s("qQmb"),Object(h["a"])(Yt,At,Lt,!1,null,null,null)),Wt=zt.exports,Ft={props:["cardId","title","subtitle","loading","resultAvailable"],components:{Spinner:Wt},created:function(){}},Ht=Ft,Gt=(s("D1Td"),Object(h["a"])(Ht,Nt,$t,!1,null,"7681db87",null)),Kt=Gt.exports,Jt=s("6+C+"),qt=(s("lkqK"),{components:{Card:Kt,Spinner:Wt},data:function(){return{name:"",artist:"",country:"",date:"",youtubeResults:[],selectedYTVideo:void 0,imageText:"Upload",fileInput:null,fileName:"No File Input",disableUploadBtn:!0,loading:!1,result:"",textFields:[],title:"",notification:"",toc:"",lang:"ZH-HK",body:[{type:"image",imageId:""}]}},mounted:function(){this.mountHandler()},beforeRouteLeave:function(t,e,s){if(console.log("beforeRouteLeave"),this.name||this.artist){var a=window.confirm("Do you really want to leave? you have unsaved changes!");a?s():s(!1)}},methods:{searchYouTube:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,s,a,n,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.name||this.artist){t.next=2;break}return t.abrupt("return");case 2:return e="https://www.googleapis.com/youtube/v3/search",s="?q=".concat(encodeURIComponent((this.name+" "+this.artist).trim())),a="&maxResults=25&part=snippet&key=AIzaSyBu7tY8pSOHs7zMF1q5U6ZochLHl3dEaLc",n=e+s+a,t.prev=6,t.next=9,fetch(n);case 9:return r=t.sent,t.next=12,r.json();case 12:i=t.sent,this.youtubeResults=i["items"],t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](6),console.log("YouTube search fucked up."),console.error(t.t0);case 20:case"end":return t.stop()}},t,this,[[6,16]])}));return function(){return t.apply(this,arguments)}}(),sendRequest:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,s,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.loading=!0,""!==this.name&&""!==this.artist&&""!==this.country&&this.selectedYTVideo){t.next=4;break}return alert("Make sure you have filled in everything."),t.abrupt("return");case 4:return e={name:this.name,artist:this.artist,country:this.country,date:this.selectedYTVideo.snippet.publishedAt,description:this.selectedYTVideo.snippet.description,thumbnails:{small:this.selectedYTVideo.snippet.thumbnails.default.url,medium:this.selectedYTVideo.snippet.thumbnails.medium.url,large:this.selectedYTVideo.snippet.thumbnails.high.url},url:"https://www.youtube.com/watch?v=".concat(this.selectedYTVideo.id.videoId),youtube_id:this.selectedYTVideo.id.videoId},console.log(JSON.stringify(e)),t.prev=6,t.next=9,fetch("".concat(this.$store.state.baseUrl,"/add-song"),{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json","x-access-token":this.$store.state.token},body:JSON.stringify(e)});case 9:return s=t.sent,t.next=12,s.json();case 12:a=t.sent,this.loading=!1,console.log(a),this.result="Success",this.name="",this.artist="",this.country="",this.youtubeResults=[],t.next=28;break;case 22:t.prev=22,t.t0=t["catch"](6),this.loading=!1,this.result="Failure",console.log("Can't upload song"),console.error(t.t0);case 28:case"end":return t.stop()}},t,this,[[6,22]])}));return function(){return t.apply(this,arguments)}}(),mountHandler:function(){for(var t=document.querySelectorAll(".mdc-text-field"),e=0;e<t.length;e++)this.textFields.push(new Jt["a"](t[e]))}}}),Qt=qt,Xt=(s("+3rX"),Object(h["a"])(Qt,Vt,Ut,!1,null,null,null)),Zt=Xt.exports,te={components:{SongForm:Zt}},ee=te,se=(s("ndzk"),Object(h["a"])(ee,Rt,Pt,!1,null,"65e4ffba",null)),ae=se.exports;a["a"].use(X["a"]);var ne=new X["a"]({mode:"history",fallback:!1,scrollBehavior:function(){return{y:0}},routes:[{path:"/",component:Dt},{path:"/songs",name:"songs",component:Dt},{path:"/add-song",name:"add song",component:ae,meta:{requiresAuth:!0}},{path:"*",redirect:"/"}]});ne.beforeEach(function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,s,a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("beforeEach"),console.log(e),n=e.matched.some(function(t){return t.meta.requiresAuth}),"/"!==e.path&&"/songs"!==e.path){t.next=6;break}return t.next=6,st.dispatch("FETCH_SONGS");case 6:if(!window||!window.localStorage){t.next=21;break}if(console.log("checking if user's logged in"),r=localStorage.getItem("userInfo"),!r){t.next=17;break}return console.log("shit"),console.log(r),r=JSON.parse(r),console.log(r),console.log("i'm logging in"),t.next=17,st.dispatch("UPDATE_LOGIN_STATE",{user_id:r.userId,token:r.token,display_name:r.userDisplayName});case 17:if(st.state.isLogin||!n){t.next=20;break}return a("/"),t.abrupt("return");case 20:a();case 21:case"end":return t.stop()}},t,this)}));return function(e,s,a){return t.apply(this,arguments)}}());var re=ne,ie=s("lIOY"),oe={apiKey:"AIzaSyBaMYFWD1Mny6p8--jB1eQ4wX1lOJJ6taM",authDomain:"my-shitty-music.firebaseapp.com",databaseURL:"https://my-shitty-music.firebaseio.com",projectId:"my-shitty-music",storageBucket:"my-shitty-music.appspot.com",messagingSenderId:"138866895643"};G.a.initializeApp(oe),Object(ie["a"])("".concat("/","firebase-messaging-sw.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(t){console.log("Service worker has been registered.");var e=G.a.messaging();e.usePublicVapidKey("BJvhLia-szgnA5EUiD71RT_ffEwG1d3E9mcK2poaMSWlzZAkhM-WAmfqBLlwDmf4WGO1MX7PWno7PCHGERj8Grc"),e.useServiceWorker(t)},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),a["a"].config.productionTip=!1,st.dispatch("SETUP_FCM"),new a["a"]({router:re,store:st,render:function(t){return t(Q)}}).$mount("#app")},ajkl:function(t,e,s){},ebMj:function(t,e,s){},hDcm:function(t,e,s){},kwws:function(t,e,s){},n6l4:function(t,e,s){},nNx0:function(t,e,s){"use strict";var a=s("Gl40"),n=s.n(a);n.a},ndzk:function(t,e,s){"use strict";var a=s("kwws"),n=s.n(a);n.a},qQmb:function(t,e,s){"use strict";var a=s("27zV"),n=s.n(a);n.a},r207:function(t,e,s){"use strict";var a=s("0lni"),n=s.n(a);n.a},tYsn:function(t,e,s){"use strict";var a=s("K4/P"),n=s.n(a);n.a},"u/4R":function(t,e,s){},vUwQ:function(t,e,s){"use strict";var a=s("u/4R"),n=s.n(a);n.a},zH0n:function(t,e,s){"use strict";var a=s("ebMj"),n=s.n(a);n.a},zwU1:function(t,e,s){t.exports=s.p+"img/logo.968be5ba.png"}});
//# sourceMappingURL=app.917b4852.js.map